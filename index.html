<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Sistema de Monitoramento</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="overlay"></div>

<div class="login-box" id="loginBox">
  <h2>Entrar no Sistema</h2>
  <input type="text" id="usuario" placeholder="Usuário" required><br>
  <input type="password" id="senha" placeholder="Senha" required><br>
  <button onclick="fazerLogin()">Entrar</button><br><br>
  <span class="link" onclick="abrirPerfil()">Editar Perfil</span>
</div>

<!-- Modal de Perfil -->
<div id="perfilModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="fecharPerfil()">&times;</span>
    <h3>Perfil do Usuário</h3>
    <input type="text" id="nomeUsuario" placeholder="Seu nome"><br>
    <input type="text" id="nomeFazenda" placeholder="Nome da fazenda"><br>
    <input type="email" id="emailUsuario" placeholder="Email"><br>
    <button onclick="salvarPerfil()">Salvar</button>
  </div>
</div>

<script>
  function fazerLogin() {
    const user = document.getElementById('usuario').value.trim();
    const pass = document.getElementById('senha').value.trim();
    if(user === "" || pass === "") {
      alert("Preencha todos os campos.");
    } else {
      alert(`Bem-vindo, ${user}!`);
      window.location.href = "mapa.html";
    }
  }

  function abrirPerfil() { document.getElementById("perfilModal").style.display="flex"; }
  function fecharPerfil() { document.getElementById("perfilModal").style.display="none"; }

  function salvarPerfil() {
    const nome = document.getElementById("nomeUsuario").value;
    const fazenda = document.getElementById("nomeFazenda").value;
    const email = document.getElementById("emailUsuario").value;
    localStorage.setItem("perfil", JSON.stringify({nome,fazenda,email}));
    alert("Perfil salvo com sucesso!");
    fecharPerfil();
  }

  window.onload = function() {
    const perfilSalvo = localStorage.getItem("perfil");
    if(perfilSalvo){
      const dados = JSON.parse(perfilSalvo);
      document.getElementById("nomeUsuario").value = dados.nome || "";
      document.getElementById("nomeFazenda").value = dados.fazenda || "";
      document.getElementById("emailUsuario").value = dados.email || "";
    }
  };
</script>
</body>
</html>




